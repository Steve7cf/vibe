<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Vibe</title>
<link rel="stylesheet" href="css/main.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@500;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap" rel="stylesheet">
</head>
<body>
<div id="app">

<!-- ‚îÄ‚îÄ‚îÄ TITLEBAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="titlebar">
  <div class="titlebar-left">
    <div class="app-logo">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
        <circle cx="12" cy="12" r="10" fill="var(--accent)"/>
        <circle cx="12" cy="12" r="3" fill="#000"/>
        <line x1="12" y1="2" x2="12" y2="6" stroke="#000" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </div>
    <span class="app-name">Vibe</span>
  </div>

  <div class="titlebar-center">
    <div class="search-wrap">
      <svg class="search-icon" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <input type="text" id="search-input" placeholder="Search songs, artists, albums‚Ä¶" autocomplete="off">
      <button id="search-clear" class="search-clear" aria-label="Clear">‚úï</button>
    </div>
  </div>

  <div class="titlebar-right">
    <!-- Palette from current track -->
    <div class="topbar-palette" id="topbar-palette" title="Colors from current track" style="display:none">
      <div class="palette-dot" id="pal-1" data-index="0"></div>
      <div class="palette-dot" id="pal-2" data-index="1"></div>
      <div class="palette-dot" id="pal-3" data-index="2"></div>
      <div class="palette-dot" id="pal-4" data-index="3"></div>
      <div class="palette-dot" id="pal-5" data-index="4"></div>
    </div>

    <div class="topbar-divider"></div>

    <!-- Theme toggle -->
    <button class="topbar-icon-btn" id="btn-theme" title="Toggle theme">
      <svg id="theme-icon-dark" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      <svg id="theme-icon-light" viewBox="0 0 24 24" class="hidden"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
    </button>

    <button class="topbar-btn" id="btn-add-files">
      <svg viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
      <span class="btn-label">Add Files</span>
    </button>
    <button class="topbar-btn" id="btn-scan-folder">
      <svg viewBox="0 0 24 24"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
      <span class="btn-label">Scan Folder</span>
    </button>

    <div class="topbar-divider"></div>

    <div class="win-controls">
      <button class="win-btn" id="btn-minimize" title="Minimize">&#8722;</button>
      <button class="win-btn" id="btn-maximize" title="Maximize">&#9633;</button>
      <button class="win-btn close" id="btn-close" title="Close">&#10005;</button>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="layout">

  <!-- SIDEBAR -->
  <aside id="sidebar">
    <nav class="sidebar-nav">
      <button class="nav-btn active" data-view="home">
        <svg viewBox="0 0 24 24"><path d="M3 9.5L12 3l9 6.5V20a1 1 0 01-1 1H4a1 1 0 01-1-1z"/><path d="M9 21V12h6v9"/></svg><span>Home</span>
      </button>
      <button class="nav-btn" data-view="library">
        <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg><span>Library</span>
      </button>
      <button class="nav-btn" data-view="queue">
        <svg viewBox="0 0 24 24"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg><span>Queue</span>
      </button>
      <button class="nav-btn" data-view="playlists">
        <svg viewBox="0 0 24 24"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg><span>Playlists</span>
      </button>
      <button class="nav-btn" data-view="equalizer">
        <svg viewBox="0 0 24 24"><line x1="4" y1="21" x2="4" y2="14"/><line x1="4" y1="10" x2="4" y2="3"/><line x1="12" y1="21" x2="12" y2="12"/><line x1="12" y1="8" x2="12" y2="3"/><line x1="20" y1="21" x2="20" y2="16"/><line x1="20" y1="12" x2="20" y2="3"/><line x1="1" y1="14" x2="7" y2="14"/><line x1="9" y1="8" x2="15" y2="8"/><line x1="17" y1="16" x2="23" y2="16"/></svg><span>Equalizer</span>
      </button>
      <button class="nav-btn" data-view="settings">
        <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06A1.65 1.65 0 0 0 15 19.4a1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg><span>Settings</span>
      </button>
    </nav>
    <div class="sidebar-playlists">
      <div class="sidebar-section-title">PLAYLISTS</div>
      <div id="sidebar-pls"></div>
      <button class="create-pl-btn" id="create-pl-btn">+ New Playlist</button>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <main id="content">
    <!-- HOME -->
    <div id="view-home" class="view active"></div>

    <!-- LIBRARY -->
    <div id="view-library" class="view">
      <div class="view-header">
        <h2>Library</h2>
        <div class="lib-tabs">
          <button class="lib-tab active" data-tab="all">All Tracks</button>
          <button class="lib-tab" data-tab="artists">Artists</button>
          <button class="lib-tab" data-tab="albums">Albums</button>
          <button class="lib-tab" data-tab="genres">Genres</button>
        </div>
      </div>
      <div id="lib-content"></div>
    </div>

    <!-- QUEUE -->
    <div id="view-queue" class="view">
      <div class="view-header">
        <h2>Play Queue</h2>
        <div class="queue-actions">
          <button class="ghost-btn" id="btn-shuffle-queue">‚áÑ Shuffle</button>
          <button class="ghost-btn danger" id="btn-clear-queue">Clear</button>
        </div>
      </div>
      <div id="queue-list"></div>
    </div>

    <!-- PLAYLISTS -->
    <div id="view-playlists" class="view">
      <div class="view-header">
        <h2>Playlists</h2>
        <div style="display:flex;gap:8px">
          <button class="ghost-btn" id="btn-import-pl">Import M3U</button>
          <button class="accent-btn" id="btn-new-pl">+ New Playlist</button>
        </div>
      </div>
      <div id="pls-grid"></div>
      <div id="pl-detail" class="hidden">
        <button class="back-btn" id="pl-back">‚Üê Playlists</button>
        <div id="pl-detail-content"></div>
      </div>
    </div>

    <!-- EQUALIZER -->
    <div id="view-equalizer" class="view">
      <div class="view-header"><h2>Equalizer</h2></div>
      <div id="eq-panel">
        <div class="eq-hd">
          <label class="toggle-label"><input type="checkbox" id="eq-on"><span class="toggle"></span><span>Enable EQ</span></label>
          <select id="eq-preset">
            <option value="flat">Flat</option><option value="pop">Pop</option>
            <option value="rock">Rock</option><option value="jazz">Jazz</option>
            <option value="classical">Classical</option><option value="electronic">Electronic</option>
            <option value="hiphop">Hip Hop</option><option value="bass">Bass Boost</option>
            <option value="treble">Treble</option><option value="vocal">Vocal</option>
          </select>
        </div>
        <div class="eq-bands" id="eq-bands"></div>
        <div class="eq-extra">
          <div class="eq-ctrl"><label>Bass Boost</label><input type="range" id="bass-boost" min="0" max="20" value="0" step="1"><span id="bass-boost-val">0 dB</span></div>
          <div class="eq-ctrl"><label>Replay Gain</label><label class="toggle-label"><input type="checkbox" id="replay-gain"><span class="toggle"></span></label></div>
        </div>
      </div>
    </div>

    <!-- SETTINGS -->
    <div id="view-settings" class="view">
      <div class="view-header"><h2>Settings</h2></div>
      <div id="settings-panel">
        <div class="settings-sec"><h3>Playback</h3>
          <div class="setting-row"><label>Crossfade</label><input type="range" id="s-crossfade" min="0" max="12" value="3" step="1"><span id="s-crossfade-val">3s</span></div>
          <div class="setting-row"><label>Fade In on track start</label><label class="toggle-label"><input type="checkbox" id="s-fadein" checked><span class="toggle"></span></label></div>
          <div class="setting-row"><label>Fade Out on track end</label><label class="toggle-label"><input type="checkbox" id="s-fadeout" checked><span class="toggle"></span></label></div>
          <div class="setting-row setting-row--col">
            <div class="setting-row-top">
              <label>Crossfade / Gapless</label>
              <label class="toggle-label"><input type="checkbox" id="s-gapless"><span class="toggle"></span></label>
            </div>
            <div class="setting-sub" id="s-gapless-sub">
              <span class="setting-sub-label">Overlap</span>
              <input type="range" id="s-gapless-offset" min="2" max="30" value="8" step="1">
              <span id="s-gapless-offset-val" class="setting-sub-val">8s</span>
            </div>
            <p class="setting-hint">Both songs play simultaneously for <strong id="s-gapless-hint-val">8s</strong> ‚Äî current fades out while next fades in. Queue auto-sorts by energy for smooth transitions.</p>
          </div>
          <div class="setting-row"><label>Playback Speed</label><input type="range" id="s-speed" min="0.5" max="2" value="1" step="0.05"><span id="s-speed-val">1.00√ó</span></div>
          <div class="setting-row"><label>Balance</label><input type="range" id="s-balance" min="-1" max="1" value="0" step="0.01"><span id="s-balance-val">Center</span></div>
          <div class="setting-row"><label>Replaygain</label>
            <select id="s-replaygain"><option value="off">Off</option><option value="track">Track</option><option value="album">Album</option></select>
          </div>
          <div class="setting-row"><label>Stop after current track</label><label class="toggle-label"><input type="checkbox" id="s-stop-after"><span class="toggle"></span></label></div>
        </div>
        <div class="settings-sec"><h3>Appearance</h3>
          <div class="setting-row"><label>Accent Color</label><input type="color" id="s-accent" value="#1db954"></div>
          <div class="setting-row"><label>Use Album Art Colors</label><label class="toggle-label"><input type="checkbox" id="s-album-colors"><span class="toggle"></span></label></div>
          <div class="setting-row"><label>Font Size</label>
            <input type="range" id="s-fontsize" min="11" max="20" value="14" step="1">
            <span id="s-fontsize-val">14px</span>
          </div>
          <div class="setting-row"><label>UI Density</label>
            <select id="s-density">
              <option value="comfortable">Comfortable</option>
              <option value="normal" selected>Normal</option>
              <option value="compact">Compact</option>
            </select>
          </div>
          <div class="setting-row"><label>Visualizer</label>
            <select id="s-visualizer"><option value="bars">Bars</option><option value="wave">Wave</option><option value="circle">Circle</option><option value="mirror">Mirror</option><option value="off">Off</option></select>
          </div>
          <div class="setting-row"><label>Show album art in sidebar</label><label class="toggle-label"><input type="checkbox" id="s-sidebar-art" checked><span class="toggle"></span></label></div>
          <div class="setting-row"><label>Animate album art</label><label class="toggle-label"><input type="checkbox" id="s-art-anim" checked><span class="toggle"></span></label></div>
        </div>
        <div class="settings-sec"><h3>Notifications &amp; System</h3>
          <div class="setting-row"><label>Track change notifications</label><label class="toggle-label"><input type="checkbox" id="s-notifs" checked><span class="toggle"></span></label></div>
          <div class="setting-row"><label>Global Media Keys</label><label class="toggle-label"><input type="checkbox" id="s-hotkeys" checked><span class="toggle"></span></label></div>
          <div class="setting-row"><label>Show in system tray</label><label class="toggle-label"><input type="checkbox" id="s-tray" checked><span class="toggle"></span></label></div>
          <div class="setting-row"><label>Discord Rich Presence</label><label class="toggle-label"><input type="checkbox" id="s-discord"><span class="toggle"></span></label></div>
          <div class="setting-row"><label>Last.fm Scrobbling</label><label class="toggle-label"><input type="checkbox" id="s-lastfm"><span class="toggle"></span></label></div>
          <div class="setting-row"><label>Sleep Timer (minutes)</label>
            <input type="number" id="s-sleep" min="0" max="480" value="0" class="num-input">
            <button class="ghost-btn" id="btn-sleep" style="margin-left:6px">Set</button>
          </div>
        </div>
        <div class="settings-sec"><h3>Queue &amp; Library</h3>
          <div class="setting-row"><label>Auto-play on startup</label><label class="toggle-label"><input type="checkbox" id="s-autoplay"><span class="toggle"></span></label></div>
          <div class="setting-row"><label>Remember queue on close</label><label class="toggle-label"><input type="checkbox" id="s-remember-queue" checked><span class="toggle"></span></label></div>
          <div class="setting-row"><label>Resume position on startup</label><label class="toggle-label"><input type="checkbox" id="s-resume-pos" checked><span class="toggle"></span></label></div>
          <div class="setting-row"><label>Watch folders for new files</label><label class="toggle-label"><input type="checkbox" id="s-watch-folders"><span class="toggle"></span></label></div>
        </div>
        <div class="settings-sec"><h3>Library Folders</h3>
          <div id="lib-folders"></div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="ghost-btn" id="btn-add-folder">+ Add Folder</button>
            <button class="ghost-btn danger" id="btn-clear-lib">Clear Library</button>
            <button class="ghost-btn danger" id="btn-reset-settings" style="margin-left:auto">‚Ü∫ Reset Settings</button>
          </div>
        </div>
        <div class="settings-sec"><h3>Keyboard Shortcuts</h3>
          <div class="shortcuts-grid">
            <div class="shortcut-row"><span>Play / Pause</span><kbd>Space</kbd></div>
            <div class="shortcut-row"><span>Next</span><kbd>Ctrl ‚Üí</kbd></div>
            <div class="shortcut-row"><span>Previous</span><kbd>Ctrl ‚Üê</kbd></div>
            <div class="shortcut-row"><span>Seek ¬±5s</span><kbd>‚Üí / ‚Üê</kbd></div>
            <div class="shortcut-row"><span>Volume</span><kbd>‚Üë / ‚Üì</kbd></div>
            <div class="shortcut-row"><span>Mute</span><kbd>M</kbd></div>
            <div class="shortcut-row"><span>Shuffle</span><kbd>Ctrl S</kbd></div>
            <div class="shortcut-row"><span>Repeat</span><kbd>Ctrl R</kbd></div>
          </div>
        </div>

        <!-- About / Ownership tile -->
        <div class="settings-sec about-tile">
          <div class="about-inner">
            <div class="about-logo">
              <svg viewBox="0 0 36 36" fill="none">
                <circle cx="18" cy="18" r="17" stroke="var(--accent)" stroke-width="1.4" stroke-dasharray="3 2.5"/>
                <circle cx="18" cy="18" r="6" fill="var(--accent)" opacity=".9"/>
                <circle cx="18" cy="18" r="2.5" fill="#000"/>
              </svg>
            </div>
            <div class="about-info">
              <div class="about-app">Vibe <span class="about-version">v1.0</span></div>
              <div class="about-tagline">A music player that feels right</div>
            </div>
          </div>
          <div class="about-credits">
            <div class="about-credit-row">
              <span class="about-credit-label">Author</span>
              <span class="about-credit-val">Steve Bazaar</span>
            </div>
            <div class="about-credit-row">
              <span class="about-credit-label">Contact</span>
              <a class="about-credit-link" href="mailto:stevebazaar99@gmail.com">stevebazaar99@gmail.com</a>
            </div>
            <div class="about-credit-row">
              <span class="about-credit-label">Built with</span>
              <span class="about-credit-val">Electron ¬∑ Web Audio API</span>
            </div>
          </div>
        </div>

      </div>
    </div>
  </main>

  <!-- SIDE PANEL -->
  <div id="side-panel">
    <div id="viz-wrap">
      <canvas id="visualizer"></canvas>
      <div class="side-art">
        <div class="side-art-img" id="side-art-img"></div>
        <div class="side-art-ph" id="side-art-ph">
          <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke-width="1"/><circle cx="12" cy="12" r="4" stroke-width="1.5"/><circle cx="12" cy="12" r="1" fill="var(--text-3)" stroke="none"/></svg>
        </div>
      </div>
    </div>
    <div class="side-info">
      <div class="side-title"  id="side-title">No track playing</div>
      <div class="side-artist" id="side-artist"></div>
      <div class="side-album"  id="side-album"></div>
    </div>
  </div>
</div><!-- /layout -->

<!-- ‚îÄ‚îÄ‚îÄ PLAYER BAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="player-bar">

  <!-- Seek bar runs full width at the very top of the bar -->
  <div class="pb-seek-row">
    <span id="time-cur" class="pb-time">0:00</span>
    <div class="pb-seek-wrap" id="seek-bar">
      <div class="pb-seek-bg"></div>
      <div class="pb-seek-fill" id="seek-fill"></div>
      <div class="pb-seek-thumb" id="seek-thumb"></div>
    </div>
    <span id="time-tot" class="pb-time pb-time-r">0:00</span>
  </div>

  <!-- Main row: left / center / right -->
  <div class="pb-main">

    <!-- LEFT: art + track info + like -->
    <div class="player-left">
      <div class="player-art" id="player-art">
        <div class="art-ph"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg></div>
      </div>
      <div class="player-info">
        <div class="player-title" id="player-title">‚Äî</div>
        <div class="player-artist" id="player-artist"></div>
      </div>
      <button class="pb-icon-btn" id="btn-like" title="Like">
        <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
      </button>
      <button class="pb-icon-btn" id="btn-open-np" title="Expand now playing">
        <svg viewBox="0 0 24 24"><polyline points="18 15 12 9 6 15"/></svg>
      </button>
    </div>

    <!-- CENTER: transport controls -->
    <div class="player-center">
      <div class="pb-controls">
        <button class="pb-ctrl-sm" id="btn-shuffle" title="Shuffle">
          <svg viewBox="0 0 24 24"><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/><polyline points="21 16 21 21 16 21"/><line x1="15" y1="15" x2="21" y2="21"/></svg>
        </button>
        <button class="pb-ctrl" id="btn-prev" title="Previous">
          <svg viewBox="0 0 24 24"><polygon points="19 20 9 12 19 4 19 20"/><line x1="5" y1="19" x2="5" y2="5"/></svg>
        </button>
        <button class="pb-play" id="btn-play" title="Play / Pause">
          <svg id="play-icon"  viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3" fill="currentColor"/></svg>
          <svg id="pause-icon" viewBox="0 0 24 24" class="hidden"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
        </button>
        <button class="pb-ctrl" id="btn-next" title="Next">
          <svg viewBox="0 0 24 24"><polygon points="5 4 15 12 5 20 5 4"/><line x1="19" y1="5" x2="19" y2="19"/></svg>
        </button>
        <button class="pb-ctrl-sm" id="btn-repeat" title="Repeat">
          <svg viewBox="0 0 24 24"><polyline points="17 1 21 5 17 9"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><polyline points="7 23 3 19 7 15"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/></svg>
        </button>
      </div>
    </div>

    <!-- RIGHT: volume + extras -->
    <div class="player-right">
      <button class="pb-icon-btn" id="btn-stop" title="Stop">
        <svg viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="2" fill="currentColor" stroke="none"/></svg>
      </button>
      <div class="pb-vol">
        <button class="pb-icon-btn" id="btn-mute" title="Mute">
          <svg id="vol-icon" viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
        </button>
        <div class="pb-vol-slider-wrap">
          <input type="range" id="vol-slider" min="0" max="1" step="0.01" value="0.8">
          <div class="pb-vol-fill" id="vol-fill"></div>
        </div>
      </div>
      <button class="pb-icon-btn pb-speed-btn" id="btn-speed" title="Playback speed">
        <span id="speed-label">1√ó</span>
      </button>
    </div>

  </div>
</div>

</div><!-- /app -->

<!-- ‚îÄ‚îÄ‚îÄ NOW PLAYING FULLSCREEN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="now-playing" class="hidden">
  <!-- Blurred backdrop -->
  <div id="np-bg"></div>

  <!-- Top bar: close button -->
  <div class="np-topbar">
    <button class="np-close" id="np-close">
      <svg viewBox="0 0 24 24"><polyline points="18 15 12 9 6 15"/></svg>
      <span>Now Playing</span>
    </button>
  </div>

  <!-- Main 2-column layout -->
  <div class="np-body">

    <!-- LEFT: art + info + controls -->
    <div class="np-left">

      <!-- Album art -->
      <div class="np-art-wrap">
        <div class="np-art" id="np-art"></div>
        <div class="np-art-shadow"></div>
      </div>

      <!-- Track info -->
      <div class="np-track-info">
        <div class="np-title"  id="np-title">‚Äî</div>
        <div class="np-artist" id="np-artist"></div>
        <div class="np-album"  id="np-album"></div>
      </div>

      <!-- Like + shuffle row -->
      <div class="np-meta-row">
        <button class="np-icon-btn" id="np-like" title="Like">
          <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
        </button>
        <button class="np-icon-btn" id="np-shuffle" title="Shuffle">
          <svg viewBox="0 0 24 24"><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/><polyline points="21 16 21 21 16 21"/><line x1="15" y1="15" x2="21" y2="21"/></svg>
        </button>
      </div>

      <!-- Seek bar -->
      <div class="np-seek-row">
        <span id="np-cur">0:00</span>
        <div class="np-seek-wrap" id="np-seek-bar">
          <div class="np-seek-track"></div>
          <div class="np-seek-fill" id="np-seek-fill"></div>
          <div class="np-seek-thumb"></div>
        </div>
        <span id="np-dur">0:00</span>
      </div>

      <!-- Transport controls -->
      <div class="np-controls">
        <button class="np-ctrl" id="np-prev" title="Previous">
          <svg viewBox="0 0 24 24"><polygon points="19 20 9 12 19 4 19 20"/><line x1="5" y1="19" x2="5" y2="5"/></svg>
        </button>
        <button class="np-play-btn" id="np-play" title="Play / Pause">
          <svg id="np-play-icon"  viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3" fill="currentColor"/></svg>
          <svg id="np-pause-icon" viewBox="0 0 24 24" class="hidden"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
        </button>
        <button class="np-ctrl" id="np-next" title="Next">
          <svg viewBox="0 0 24 24"><polygon points="5 4 15 12 5 20 5 4"/><line x1="19" y1="5" x2="19" y2="19"/></svg>
        </button>
      </div>

      <!-- Volume -->
      <div class="np-vol-row">
        <svg viewBox="0 0 24 24" class="np-vol-icon"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/></svg>
        <input type="range" id="np-vol" min="0" max="1" step="0.01" value="0.8" class="np-vol-slider">
        <svg viewBox="0 0 24 24" class="np-vol-icon"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
      </div>

    </div>

    <!-- RIGHT: queue -->
    <div class="np-right">
      <div class="np-queue-hd">
        <span>Up Next</span>
        <span class="np-queue-count" id="np-queue-count"></span>
      </div>
      <div class="np-queue" id="np-queue"></div>
    </div>

  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ ONBOARDING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="onboarding" class="hidden">
  <div class="ob-card">
    <div class="ob-dots">
      <div class="ob-dot on" id="ob-d1"></div>
      <div class="ob-dot"   id="ob-d2"></div>
      <div class="ob-dot"   id="ob-d3"></div>
    </div>
    <div id="ob-body" class="ob-body"></div>
    <div class="ob-nav">
      <button class="ghost-btn hidden" id="ob-prev">‚Üê Back</button>
      <button class="accent-btn"       id="ob-next">Continue ‚Üí</button>
    </div>
  </div>
</div>

<!-- SPEED POPUP -->
<div id="speed-popup" class="popup hidden">
  <div class="popup-title">Playback Speed</div>
  <input type="range" id="popup-speed" min="0.5" max="2" step="0.05" value="1">
  <span id="popup-speed-val">1.00√ó</span>
</div>

<!-- CONTEXT MENU -->
<div id="ctx-menu" class="ctx-menu hidden">
  <div class="ctx-item" id="ctx-play">‚ñ∂ Play</div>
  <div class="ctx-item" id="ctx-next">‚ñ∑ Play Next</div>
  <div class="ctx-item" id="ctx-queue">+ Add to Queue</div>
  <div class="ctx-item" id="ctx-pl">‚ò∞ Add to Playlist</div>
  <div class="ctx-sep"></div>
  <div class="ctx-item" id="ctx-info">‚Ñπ Track Info</div>
  <div class="ctx-item danger" id="ctx-remove">‚úï Remove from Library</div>
  <div class="ctx-item danger" id="ctx-delete">üóë Delete from Disk</div>
</div>

<!-- MODAL -->
<div id="modal-overlay" class="hidden">
  <div id="modal">
    <div id="modal-title"></div>
    <div id="modal-body"></div>
    <div id="modal-actions">
      <button class="ghost-btn" id="modal-cancel">Cancel</button>
      <button class="accent-btn" id="modal-ok">OK</button>
    </div>
  </div>
</div>

<!-- TOAST -->
<div id="toast-box"></div>

<script src="js/utils.js"></script>
<script src="js/library.js"></script>
<script src="js/audio.js"></script>
<script src="js/equalizer.js"></script>
<script src="js/visualizer.js"></script>
<script src="js/player.js"></script>
<script src="js/ui.js"></script>
<script src="js/app.js"></script>
</body>
</html>
